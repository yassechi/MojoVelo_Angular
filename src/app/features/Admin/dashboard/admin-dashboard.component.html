<div class="dashboard-container page-shell">
  <div class="page-header">
    <div>
      <h1 class="page-title">Dashboard RH</h1>
      <p class="page-subtitle">Vue d'ensemble des demandes et contrats</p>
    </div>
  </div>

  <div class="stat-grid">
    <div class="stat-card">
      <div class="stat-label">Demandes en attente compagnie</div>
      <div class="stat-value">{{ stats.pendingDemandes }}</div>
    </div>
    <div class="stat-card stat-card--success">
      <div class="stat-label">Contrats actifs</div>
      <div class="stat-value">{{ stats.activeContrats }}</div>
    </div>
    <div class="stat-card stat-card--accent">
      <div class="stat-label">Budget total engage</div>
      <div class="stat-value">{{ formatCurrency(stats.budgetTotal) }}</div>
    </div>
  </div>

  <div class="grid mt-4">
    <div class="col-12 lg:col-7">
      <p-card styleClass="chart-card">
        <ng-template pTemplate="header">
          <div class="p-3">
            <h3 class="m-0 chart-title">Repartition par type de velo</h3>
          </div>
        </ng-template>
        <p-chart
          type="bar"
          class="mojo-chart"
          [data]="bikeTypeChartData"
          [options]="barChartOptions"
          style="height: 320px"
        ></p-chart>
      </p-card>
    </div>

    <div class="col-12 lg:col-5">
      <p-card styleClass="section-card activity-card">
        <ng-template pTemplate="header">
          <div class="p-3">
            <h3 class="m-0 chart-title">Dernieres activites</h3>
          </div>
        </ng-template>
        <div class="activity-list">
          @if (activityFeed.length === 0) {
            <div class="text-600">Aucune activite recente</div>
          } @else {
            <div class="activity-item" *ngFor="let item of activityFeed">
              <div>
                <div class="font-semibold">{{ item.title }}</div>
                <div class="text-600 text-sm">{{ item.detail }}</div>
              </div>
              <span class="activity-time">{{ item.time }}</span>
            </div>
          }
        </div>
      </p-card>
    </div>
  </div>

  <div class="grid mt-4">
    <div class="col-12 lg:col-6">
      <p-card styleClass="chart-card">
        <ng-template pTemplate="header">
          <div class="p-3">
            <h3 class="m-0 chart-title">Demandes par statut</h3>
          </div>
        </ng-template>
        <p-chart
          type="doughnut"
          class="mojo-chart"
          [data]="demandeStatusChartData"
          [options]="statusChartOptions"
          style="height: 280px"
        ></p-chart>
      </p-card>
    </div>

    <div class="col-12 lg:col-6">
      <p-card styleClass="chart-card">
        <ng-template pTemplate="header">
          <div class="p-3">
            <h3 class="m-0 chart-title">Contrats par statut</h3>
          </div>
        </ng-template>
        <p-chart
          type="doughnut"
          class="mojo-chart"
          [data]="contratStatusChartData"
          [options]="statusChartOptions"
          style="height: 280px"
        ></p-chart>
      </p-card>
    </div>
  </div>
</div>
