<div class="contrat-detail-container page-shell">
  <p-toast></p-toast>

  <!-- Header -->
  <div class="page-header">
    <div class="flex align-items-center gap-3">
      <p-button
        icon="pi pi-arrow-left"
        [text]="true"
        [rounded]="true"
        (onClick)="goBack()"
        [pTooltip]="'Retour &agrave; la liste'"
      ></p-button>
      <div>
        <h1 class="page-title">Contrat {{ contrat()?.ref }}</h1>
        <p class="page-subtitle">Details du contrat de location</p>
      </div>
    </div>
    <div class="flex gap-2 align-items-center">
      @if (contrat(); as currentContrat) {
        <p-tag
          [value]="getStatutLabel(currentContrat.statutContrat)"
          [severity]="getStatutSeverity(currentContrat.statutContrat)"
          styleClass="text-lg"
        ></p-tag>
      }
    </div>
  </div>

  @if (contrat(); as currentContrat) {
    <div class="section-card p-2 contract-tabs">
      <p-tabs [value]="activeTab()" (valueChange)="onTabChange($event)">
        <p-tablist>
          @for (tab of tabs; track tab.route) {
            <p-tab [value]="tab.route" class="flex items-center gap-2 text-inherit">
              <i [class]="tab.icon"></i>
              <span>{{ tab.label }}</span>
            </p-tab>
          }
        </p-tablist>
      </p-tabs>
    </div>

    <router-outlet></router-outlet>
  } @else if (loading()) {
    <div class="text-center py-8">
      <i class="pi pi-spin pi-spinner" style="font-size: 3rem; color: #1e3a8a;"></i>
      <p class="mt-3 text-600">Chargement...</p>
    </div>
  }
</div>
