<div class="flex align-items-center justify-content-center" style="min-height: 100vh; background: linear-gradient(135deg, #1e3a8a 0%, #0f172a 100%); padding: 2rem 0;">
  <p-toast></p-toast>

  <div style="width: 600px;">
    <p-card styleClass="shadow-8">
      <ng-template pTemplate="header">
        <div class="text-center pt-4">
          <h1 class="brand-title">mojo</h1>
          <p class="text-600 mt-2">Cr&eacute;er votre compte</p>
        </div>
      </ng-template>

      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <!-- Pr&eacute;nom et Nom -->
        <div class="grid">
          <div class="col-6">
            <div class="field mb-4">
              <label for="firstName" class="block mb-2 font-semibold">Pr&eacute;nom</label>
              <input
                pInputText
                id="firstName"
                formControlName="firstName"
                placeholder="Votre pr&eacute;nom"
                class="w-full"
                [class.ng-invalid]="firstName?.invalid && firstName?.touched"
              />
              @if (firstName?.invalid && firstName?.touched) {
                <small class="text-red-500">
                  Pr&eacute;nom requis
                </small>
              }
            </div>
          </div>

          <div class="col-6">
            <div class="field mb-4">
              <label for="lastName" class="block mb-2 font-semibold">Nom</label>
              <input
                pInputText
                id="lastName"
                formControlName="lastName"
                placeholder="Votre nom"
                class="w-full"
                [class.ng-invalid]="lastName?.invalid && lastName?.touched"
              />
              @if (lastName?.invalid && lastName?.touched) {
                <small class="text-red-500">
                  Nom requis
                </small>
              }
            </div>
          </div>
        </div>

        <!-- Nom d'utilisateur -->
        <div class="field mb-4">
          <label for="userName" class="block mb-2 font-semibold">Nom d'utilisateur</label>
          <input
            pInputText
            id="userName"
            formControlName="userName"
            placeholder="Nom d'utilisateur"
            class="w-full"
            [class.ng-invalid]="userName?.invalid && userName?.touched"
          />
          @if (userName?.invalid && userName?.touched) {
            <small class="text-red-500">
              Nom d'utilisateur requis
            </small>
          }
        </div>

        <!-- Email -->
        <div class="field mb-4">
          <label for="email" class="block mb-2 font-semibold">Email</label>
          <input
            pInputText
            id="email"
            type="email"
            formControlName="email"
            placeholder="exemple@email.com"
            class="w-full"
            [class.ng-invalid]="email?.invalid && email?.touched"
          />
          @if (email?.invalid && email?.touched) {
            <small class="text-red-500">
              @if (email?.errors?.['required']) {
                <span>Email requis</span>
              }
              @if (email?.errors?.['email']) {
                <span>Format email invalide</span>
              }
            </small>
          }
        </div>

        <!-- T&eacute;l&eacute;phone -->
        <div class="field mb-4">
          <label for="phoneNumber" class="block mb-2 font-semibold">T&eacute;l&eacute;phone</label>
          <input
            pInputText
            id="phoneNumber"
            formControlName="phoneNumber"
            placeholder="+32 XXX XX XX XX"
            class="w-full"
            [class.ng-invalid]="phoneNumber?.invalid && phoneNumber?.touched"
          />
          @if (phoneNumber?.invalid && phoneNumber?.touched) {
            <small class="text-red-500">
              T&eacute;l&eacute;phone requis
            </small>
          }
        </div>

        <!-- Mot de passe -->
        <div class="grid">
          <div class="col-6">
            <div class="field mb-4">
              <label for="password" class="block mb-2 font-semibold">Mot de passe</label>
              <p-password
                id="password"
                formControlName="password"
                placeholder="Mot de passe"
                [toggleMask]="true"
                [feedback]="true"
                styleClass="w-full"
                [inputStyleClass]="'w-full'"
                [class.ng-invalid]="password?.invalid && password?.touched"
              ></p-password>
              <small class="text-600 block mt-1" style="font-size: 0.75rem;">
                Doit contenir : 8+ caract&egrave;res, 1 majuscule, 1 minuscule, 1 chiffre, 1 caract&egrave;re sp&eacute;cial
              </small>
              @if (password?.invalid && password?.touched) {
                <small class="text-red-500 block mt-1">
                  @if (password?.errors?.['required']) {
                    <span>Mot de passe requis</span>
                  }
                  @if (password?.errors?.['minlength']) {
                    <span>Minimum 8 caract&egrave;res</span>
                  }
                </small>
              }
            </div>
          </div>

          <div class="col-6">
            <div class="field mb-4">
              <label for="confirmPassword" class="block mb-2 font-semibold">Confirmer</label>
              <p-password
                id="confirmPassword"
                formControlName="confirmPassword"
                placeholder="Confirmer"
                [toggleMask]="true"
                [feedback]="false"
                styleClass="w-full"
                [inputStyleClass]="'w-full'"
                [class.ng-invalid]="confirmPassword?.invalid && confirmPassword?.touched"
              ></p-password>
              @if (confirmPassword?.invalid && confirmPassword?.touched) {
                <small class="text-red-500 block mt-1">
                  @if (confirmPassword?.errors?.['required']) {
                    <span>Confirmation requise</span>
                  }
                  @if (confirmPassword?.errors?.['passwordMismatch']) {
                    <span>Mots de passe diff&eacute;rents</span>
                  }
                </small>
              }
            </div>
          </div>
        </div>

        <!-- R&ocirc;le et Organisation -->
        <div class="grid">
          <div class="col-6">
            <div class="field mb-4">
              <label for="role" class="block mb-2 font-semibold">R&ocirc;le</label>
              <p-select
                id="role"
                formControlName="role"
                [options]="roles"
                optionLabel="label"
                optionValue="value"
                placeholder="S&eacute;lectionnez un r&ocirc;le"
                styleClass="w-full"
                [class.ng-invalid]="role?.invalid && role?.touched"
              ></p-select>
              @if (role?.invalid && role?.touched) {
                <small class="text-red-500">
                  R&ocirc;le requis
                </small>
              }
            </div>
          </div>

          <div class="col-6">
            <div class="field mb-4">
              <label for="organisationId" class="block mb-2 font-semibold">Organisation</label>
              <p-select
                id="organisationId"
                formControlName="organisationId"
                [options]="organisations"
                optionLabel="nom"
                optionValue="id"
                placeholder="S&eacute;lectionnez une organisation"
                styleClass="w-full"
                [class.ng-invalid]="organisationId?.invalid && organisationId?.touched"
              ></p-select>
              @if (organisationId?.invalid && organisationId?.touched) {
                <small class="text-red-500">
                  Organisation requise
                </small>
              }
            </div>
          </div>
        </div>

        <!-- Taille (optionnel) -->
        <div class="field mb-4">
          <label for="tailleCm" class="block mb-2 font-semibold">Taille (cm) - Optionnel</label>
          <p-inputnumber
            id="tailleCm"
            formControlName="tailleCm"
            placeholder="170"
            [min]="100"
            [max]="250"
            styleClass="w-full"
            [inputStyleClass]="'w-full'"
          ></p-inputnumber>
        </div>

        <!-- Submit button -->
        <p-button
          label="S'inscrire"
          type="submit"
          [loading]="loading"
          styleClass="w-full"
          [disabled]="registerForm.invalid"
        ></p-button>
      </form>

      <ng-template pTemplate="footer">
        <div class="text-center pt-3">
          <p class="text-600">
            Vous avez d&eacute;j&agrave; un compte ?
            <a routerLink="/login" class="font-semibold cursor-pointer hover:underline" style="color: #1e3a8a;">
              Se connecter
            </a>
          </p>
        </div>
      </ng-template>
    </p-card>
  </div>
</div>
